#!/usr/local/bin/tcsh

# $Id: launchPrototype,v 1.4 2000/04/13 13:08:35 locher Exp $
# make sure the prototype is running on vasarely.unibe.ch:9500
# with the following crontab entry on vasarely.unibe.ch
# 22,52 * * * * csh -c "nice /home/pse4/jobs/launchPrototype >& /home/pse4/jobs/protolaunch.txt"

source ~/.login 

echo Running protolaunch on
/usr/bin/uname -a
/usr/bin/date
echo " "

cd /home/pse4/scr
cvs co playground
cd playground
make
cd output

if (-s /home/pse4/jobs/protoPID) then
    set OP=`awk '{print $1}' /home/pse4/jobs/protoPID`
    ls -1 /proc | grep "^$OP" > /tmp/protoALIVE
endif

if (-s /tmp/protoALIVE) then
    kill -KILL $OP
    echo Killing old process $OP ...
    sleep 1
endif

nohup start &
sleep 15
ps | grep java  > /home/pse4/jobs/protoPID





